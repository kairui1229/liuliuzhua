{"version":3,"file":"address.js","sources":["packageB/address/address.vue","../../Hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFja2FnZUJcYWRkcmVzc1xhZGRyZXNzLnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"address-page\">\n\t\t<!--地址列表-->\n\t\t<view class=\"address-list\" v-if=\"addressList.length\">\n\t\t\t<view class=\"address-item\" v-for=\"item in addressList\" :key=\"item.id\" @click=\"\">\n\t\t\t\t<view class=\"address-info\">\n\t\t\t\t\t<view class=\"contact-info\">\n\t\t\t\t\t\t<text class=\"name\">{{item.name}}</text>\n\t\t\t\t\t\t<text class=\"phone\">{{item.phone}}</text>\n\t\t\t\t\t\t<text class=\"default-tag\" v-if=\"item.is_default\">默认</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"address-detail\">\n\t\t\t\t\t\t{{item.province}}{{item.city}}{{item.district}}{{item.detail}}\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"address-actions\">\n\t\t\t\t\t<view class=\"action-btn\" @click=\"\">\n\t\t\t\t\t\t<up-icon name=\"edit-pen\" size=\"20\" color=\"#666\" ></up-icon>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"action-btn\" @click=\"deleteAddress(item.id)\">\n\t\t\t\t\t\t<up-icon name=\"trash\" size=\"20\" color=\"#666\"></up-icon>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<!--空状态-->\n\t\t<view class=\"empty-state\" v-else>\n\t\t\t<up-icon name=\"map\" size=\"60\" color=\"#ccc\"></up-icon>\n\t\t\t<text class=\"empty-text\">您还未添加收货地址哦~</text>\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 底部新增收货地址 -->\n\t\t<view class=\"add-btn\" @click=\"\">\n\t\t\t<up-icon name=\"plus\" size=\"20\" color=\"#fff\"></up-icon>\n\t\t\t<text>新增收货地址</text>\n\t\t</view>\r\n\t\t\n\t\t<!--地址编辑弹窗-->\n\t\t<up-popup :show=\"false\" closeable class=\"wrap\">\n\t\t\t<view class=\"address-form\">\n\t\t\t\t<view class=\"form-title\">新增地址</view>\n\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t<text class=\"label\">收货人</text>\n\t\t\t\t\t<input placeholder=\"请输入收货人姓名\" class=\"input\"/>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t<text class=\"label\">手机号</text>\n\t\t\t\t\t<input  placeholder=\"请输入手机号\" type=\"number\" maxlength=\"11\" class=\"input\"/>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"form-item\" @click=\"\">\n\t\t\t\t\t<text class=\"label\">所在地区</text>\n\t\t\t\t\t<view class=\"region-display\">\n\t\t\t\t\t\t<text >请选择所在地区</text>\n\t\t\t\t\t\t<up-icon name=\"arrow-right\" size=\"16\" color=\"#999\" class=\"right\"></up-icon>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t<text class=\"label\">详细地址</text>\n\t\t\t\t\t<textarea placeholder=\"请输入详细地址\" class=\"textarea\"/>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"form-item\">\n\t\t\t\t\t<text class=\"def\">设为默认地址</text>\n\t\t\t\t\t<switch color=\"#ffce2c\" @change=\"\"></switch>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"form-actions\">\n\t\t\t\t\t<view class=\"cancel-btn\" @click=\"\">取消</view>\n\t\t\t\t\t<view class=\"save-btn\" @click=\"\">保存</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</up-popup>\r\n\t\t\r\n\t\t<!--省市区联动-->\r\n\t\t <up-picker \r\n\t\t :show=\"show\" \r\n\t\t ref=\"uPickerRef\" \r\n\t\t :columns=\"columns\" \r\n\t\t @change=\"changeHandler\" \r\n\t\t >\r\n\t\t </up-picker>\n\t</view>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref,reactive } from \"vue\"\nimport {get,post} from \"../../utils/http\"\nimport {onLoad} from \"@dcloudio/uni-app\"\n\nonLoad((options)=>{\n\tgetAddressList()\n})\n\n//地址列表\nconst addressList=ref([])\nconst getAddressList=async()=>{\n\ttry {\n\t\tconst result:any=await get(\"/cart/address\");\n\t\taddressList.value=result\n\t\tuni.__f__('log','at packageB/address/address.vue:98',\"地址列表\",addressList.value)\n\t} catch (error) {\n\t\tuni.__f__('log','at packageB/address/address.vue:100',error)\n\t}\n}\n\r\n//删除地址\r\nconst deleteAddress=(id:number)=>{\n\tuni.showModal({\n\t\ttitle:\"提示\",\n\t\tcontent:\"确认要删除这个地址吗？\",\n\t\tsuccess:async(res)=> {\n\t\t\tif(res.confirm){\n\t\t\t\ttry {\n\t\t\t\t\tawait post(\"/cart/deleteAddress\",{id});\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle:\"删除成功\",\n\t\t\t\t\t\ticon:\"success\"\n\t\t\t\t\t})\n\t\t\t\t\tgetAddressList()\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.__f__('log','at packageB/address/address.vue:119',error)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n}\r\n\r\n//省市区级联选择\r\nconst show = ref(true);\nconst loading = ref(false);\nconst columns = reactive([\n  ['山东省','北京市', '广东省', '江苏省'],\n  ['青岛市', '济南市', '威海市', '烟台市'],\n  [\"市南区\",\"市北区\",\"崂山区\",\"李沧区\"]\n]);\nconst columnData = reactive([\n  ['青岛市', '济南市', '威海市', '烟台市'],\n  [\"北京市\"],  \n  ['广州市', '深圳市', '珠海市'],   \n  ['南京市', '苏州市', '无锡市'],\n]);\r\n//区域的数据\nconst districtData=reactive([\n\t //山东省\t\n\t [\"市南区\",\"市北区\",\"崂山区\",\"李沧区\"],  // 青岛市\n\t [\"历下区\",\"市中区\",\"槐荫区\",\"天桥区\"],  // 济南市\n\t [\"环翠区\",\"文登区\",\"荣成市\",\"乳山市\"],  // 威海市\n\t [\"芝罘区\",\"福山区\",\"牟平区\",\"莱山区\"],  // 烟台市\n\t //北京市\n\t [\"东城区\",\"西城区\",\"朝阳区\",\"海淀区\",\"丰台区\"],\n\t  // 广东省城市对应的区\n\t [\"越秀区\",\"海珠区\",\"荔湾区\",\"天河区\"],  // 广州市\n\t [\"福田区\",\"罗湖区\",\"南山区\",\"盐田区\"],  // 深圳市\n\t [\"香洲区\",\"斗门区\",\"金湾区\"],           // 珠海市\n\t  // 江苏省城市对应的区\n\t [\"玄武区\",\"秦淮区\",\"建邺区\",\"鼓楼区\"],  // 南京市\n\t [\"姑苏区\",\"虎丘区\",\"吴中区\",\"相城区\"],  // 苏州市\n\t [\"梁溪区\",\"锡山区\",\"惠山区\",\"滨湖区\"]   // 无锡市\n])\n\nconst uPickerRef = ref(null)\nconst changeHandler = (e) => {\n  const {\n    columnIndex, //操作的那一列的序号 第一列是0\n    value,\t//每一列所选的数据，结果是个数组\n    values,//所有列数据\n    index, //当前所操作列所选中数据的角标\n  } = e;\n\n  if (columnIndex === 0) {\n      uPickerRef.value.setColumnValues(1, columnData[index])//要修改列的序号，要更新的数据数组\r\n\t  //更新区域数据\r\n\t  const cityIndex = getCityIndex(index,0)\r\n\t  uPickerRef.value.setColumnValues(2,districtData[cityIndex])//要修改列的序号，要更新的数据数组\n  }else if(columnIndex === 1){\r\n\t  const provinceIndex=columns[0].indexOf(value[0])\r\n\t  //更新区域数据\r\n\t  const cityIndex=getCityIndex(provinceIndex,index)\r\n\t  uPickerRef.value.setColumnValues(2,districtData[cityIndex])//要修改列的序号，要更新的数据数组\r\n  }\n};\r\n\r\n// 用来获取城市在对应的区域数组中的角标\r\n// 所选省份，前面的省份城市总和即我所选的省份的第一个城市的角标\n// 得到省份城市总和 + 所选城市当前的角标 即为当前区域对应的角标  \r\nconst getCityIndex = (provinceIndex:number,cityIndex:number) =>{\r\n\tconst cityCountPerProvince=columnData.map(item=>item.length) //[4,1,3,3] 获取每个省份对应的城市数量\r\n\tlet total = 0 //用来存前面一共多少城市\r\n\tfor(let i=0;i<provinceIndex;i++){\r\n\t\t total+=cityCountPerProvince[i]\r\n\t}\r\n\treturn total+cityIndex\r\n}\r\n\r\nconst confirm = (e) => {\n  uni.__f__('log','at packageB/address/address.vue:194','confirm', e.value);\n  show.value = false;\n};\n</script>\n\n<style lang=\"scss\" scoped>\n\t.address-page{\n\t\tmin-height: 100vh;\n\t\tbackground-color: #f5f5f5;\n\t\tpadding-bottom: 120rpx;\n\t\t.address-list{\n\t\t\t.address-item{\n\t\t\t\tbackground-color: #fff;\n\t\t\t\tmargin-bottom: 20rpx;\n\t\t\t\tpadding: 30rpx;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\t.address-info{\n\t\t\t\t\tflex: 1;\n\t\t\t\t\t.contact-info{\n\t\t\t\t\t\tmargin-bottom: 10rpx;\n\t\t\t\t\t\t.name{\n\t\t\t\t\t\t\tfont-size: 32rpx;\n\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\tcolor: #333;\n\t\t\t\t\t\t\tmargin-right: 20rpx;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t.phone{\n\t\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t\t\tmargin-right: 20rpx;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t.default-tag{\n\t\t\t\t\t\t\tbackground-color: #ffce2c;\n\t\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t\t\tpadding: 4rpx 12rpx;\n\t\t\t\t\t\t\tborder-radius: 6rpx;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t.address-detail{\n\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t\tline-height: 1.4;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.address-actions{\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t.action-btn{\n\t\t\t\t\t\twidth: 60rpx;\n\t\t\t\t\t\theight: 60rpx;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\tbackground-color: #f5f5f5;\n\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t\tmargin-right: 16rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.empty-state{\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tpadding: 100rpx 0;\n\t\t\t.empty-text{\n\t\t\t\tmargin-top: 20rpx;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: #999;\n\t\t\t}\n\t\t}\n\t\t.add-btn{\n\t\t\tposition: fixed;\n\t\t\tbottom: 0;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\theight: 120rpx;\n\t\t\tbackground-color: #ffce2c;\n\t\t\tcolor: #fff;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tfont-size: 32rpx;\n\t\t\tfont-weight: bold;\n\t\t\ttext{margin-left: 16rpx;}\n\t\t}\n\n\t}\n\t.address-form{\n\n\t\t.form-title{\n\t\t\tfont-size: 36rpx;\n\t\t\tfont-weight: bold;\n\t\t\tcolor: #333;\n\t\t\ttext-align: center;\n\t\t\tmargin-bottom: 40rpx;\n\t\t\tmargin-top: 20rpx;\n\t\t}\n\t\t.form-item{\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tpadding: 30rpx 0;\n\t\t\tborder-bottom: 1rpx solid #eee;\n\t\t\t.label{\n\t\t\t\twidth: 160rpx;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: #333;\n\t\t\t\tmargin-left: 20rpx;\n\t\t\t}\n\t\t\t.input{\n\t\t\t\tflex: 1;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: #333;\n\t\t\t}\n\t\t\t.def{margin: 0 20rpx;}\n\t\t\t.textarea{\n\t\t\t\tflex: 1;\n\t\t\t\theight: 120rpx;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: #333;\n\t\t\t}\n\t\t\t.region-display{\n\t\t\t\tflex: 1;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: #333;\n\t\t\t\ttext{\n\t\t\t\t\tcolor: #666\n\t\t\t\t}\n\t\t\t\t.right{\n\t\t\t\t\tmargin-right: 20rpx;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.form-actions{\n\t\t\tdisplay: flex;\n\t\t\tmargin-top:40rpx;\n\t\t\t.cancel-btn,.save-btn{\n\t\t\t\tflex: 1;\n\t\t\t\theight: 80rpx;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tfont-size: 32rpx;\n\t\t\t\tfont-weight: bold;\n\t\t\t\tborder-radius: 40rpx;\n\t\t\t\tmargin-right: 16rpx;\n\t\t\t}\n\t\t\t.cancel-btn{\n\t\t\t\tbackground-color: #f5f5f5;\n\t\t\t\tcolor: #666;\n\t\t\t}\n\t\t\t.save-btn{\n\t\t\t\tbackground-color: #ffce2c;\n\t\t\t\tcolor: #fff;\n\t\t\t}\n\t\t}\n\t}\n</style>\n","import MiniProgramPage from 'D:/uni-app项目/liuliuzhua/packageB/address/address.vue'\nwx.createPage(MiniProgramPage)"],"names":["onLoad","ref","get","uni","post","reactive"],"mappings":"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"}