{"version":3,"file":"merchant.js","sources":["packageB/merchant/merchant.vue","../../Hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFja2FnZUJcbWVyY2hhbnRcbWVyY2hhbnQudnVl"],"sourcesContent":["<template>\n\t<view class=\"merchant-page\">\n\t\t<view class=\"search-header\">\r\n\t\t\t<up-search placeholder=\"搜索商家\" v-model=\"searchWord\" @search=\"handleSearch\" :clearabled=\"false\"></up-search>\r\n\t\t</view>\r\n\t\t<view class=\"merchant\">\r\n\t\t\t<view class=\"custom-dropdown\">\r\n\t\t\t\t<view class=\"dropdown-header\">\r\n\t\t\t\t\t<view class=\"dropdown-item\" @click=\"changeSort(0)\">\r\n\t\t\t\t\t\t<text class=\"dropdown-text\">距离</text>\r\n\t\t\t\t\t\t<up-icon name=\"arrow-down\" size=\"16\" color=\"#999\"></up-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"dropdown-item\" @click=\"changeSort(1)\">\r\n\t\t\t\t\t\t<text class=\"dropdown-text\">好评</text>\r\n\t\t\t\t\t\t<up-icon name=\"arrow-down\" size=\"16\" color=\"#999\"></up-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"dropdown-item\" @click=\"changeSort(2)\">\r\n\t\t\t\t\t\t<text class=\"dropdown-text\">价格</text>\r\n\t\t\t\t\t\t<up-icon name=\"arrow-down\" size=\"16\" color=\"#999\"></up-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"tabs\">\r\n\t\t\t<up-tabs :list=\"list1\" v-model:current=\"currentIndex\" @click=\"handleSelect\"></up-tabs>\r\n\t\t</view>\r\n\t\t<view class=\"service-card\" v-for=\"item in merchanList\" :key=\"item.merchant_id\" @click=\"goDetail(item)\">\r\n\t\t\t<image class=\"service-img\" mode=\"aspectFill\" :src=\"item.pic\"></image>\r\n\t\t\t<view class=\"service-info\">\r\n\t\t\t\t<text class=\"service-name\">{{item.merchant_name}}</text>\r\n\t\t\t\t<view class=\"rate-area\">\r\n\t\t\t\t\t<up-rate v-model=\"item.rating\" readonly  inactive-color=\"#b2b2b2\" active-color=\"#ffce2c\"></up-rate>\r\n\t\t\t\t\t<text class=\"rate-text\">{{item.rating}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"service-detail\">{{item.address}}</text>\r\n\t\t\t\t<view class=\"tag-area\">\r\n\t\t\t\t\t<view class=\"tag-item\" v-for=\"tag in item.service.split(',')\" :key=\"tag\">{{tag}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"price-area\">\r\n\t\t\t\t\t<view>惠</view>【新客福利】<text>￥19.9</text>代金券可领\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<up-divider text=\"我是有底线的\"></up-divider>\n\t</view>\r\n\t<up-picker ref=\"uPickerRef\" :show=\"show\" :columns=\"columns\" @cancel=\"close\" @confirm=\"confirm\"></up-picker>\n</template>\n\n<script lang=\"ts\" setup>\nimport { reactive,ref } from 'vue';  \nimport { get } from '../../utils/http';\nimport {onReachBottom,onLoad} from \"@dcloudio/uni-app\"\n\r\nconst list1 = reactive([  \n\t{ name: '推荐' },  \n\t{ name: '寄养' },  \n\t{ name: '摄影' },  \n\t{ name: '美容' },  \n\t{ name: '洗澡' },  \n\t{ name: '接送' },  \n\t{ name: '疫苗' },  \n\t{ name: '训练' }  \n]); \r\n\r\n//页签切换\r\nconst currentIndex=ref<number>(0)\r\n\r\n//筛选参数\nconst params=reactive({\n\tkeyword:\"\",//服务分类选项关键词\n\tmerchantName:\"\",//商家名称模糊查询\n\tsortBy:\"\"//评价的排序方式 由高到低/由低到高\n})\r\n\r\n//页签点击切换\r\nconst handleSelect=(item,index)=>{\r\n\tsearchWord.value = \"\"\n\tparams.merchantName=\"\"\n\tif(index===0){\n\t\tparams.keyword=\"\"\n\t}else{\n\t\tparams.keyword=item.name\n\t}\n\tgetMerchanList(1)\n}\r\n\r\nonLoad((options)=>{\r\n\t//uni.__f__('log','at packageB/merchant/merchant.vue:88',111,options.keyword)\r\n\tconst index:number=list1.findIndex(item=>options.keyword.includes(item.name));\r\n\t//uni.__f__('log','at packageB/merchant/merchant.vue:90',555,index)\r\n\tcurrentIndex.value=index===-1?0:index\r\n\tparams.keyword=index===-1?\"\":list1[index].name\n\tgetMerchanList(1)\n})\r\n\r\n//商家列表\r\nconst merchanList=ref([])\nconst currentPage=ref<number>(1)\nconst totalPages=ref<number>(0)\nconst getMerchanList=async (page:number)=>{\n\ttry {\n\t\tconst data:any=await get(\"/home/merchants\",{page,...params});\n\t\tif(page===1){\n\t\t\tmerchanList.value=data.list\n\t\t}else{\n\t\t\tmerchanList.value=[...merchanList.value,...data.list]\n\t\t}\n\t\ttotalPages.value=data.pagination.totalPages\n\t\tcurrentPage.value=data.pagination.current\n\t} catch (error) {\n\t\tuni.__f__('error','at packageB/merchant/merchant.vue:111',\"获取失败\")\n\t}\t\n}\nonReachBottom(()=>{\n\tif(currentPage.value<totalPages.value){\n\t\tgetMerchanList(currentPage.value+1)\n\t}\n})\r\n\r\n//弹窗相关\r\nconst show = ref(false);\r\nconst uPickerRef=ref(null)\nconst columns = reactive([\n  ['默认', '由低到高', '由高到低']\n]);\r\n\r\n//选择类型\r\nconst changeSort = (index:number) =>{\r\n\tshow.value=true;\r\n\tuPickerRef.value.setIndexs([0])\r\n}\r\n\r\n//关闭弹窗\r\nconst close=()=>{\n\tshow.value=false\n}\r\n\r\n//弹窗确认\r\nconst confirm=(e)=>{\n\tif(e.value[0]===\"默认\"){\n\t\tparams.sortBy=\"\"\n\t}else if(e.value[0]===\"由高到低\"){\n\t\tparams.sortBy=\"rating\"\n\t}else if(e.value[0]===\"由低到高\"){\n\t\tparams.sortBy=\"rating_asc\"\n\t}\n\tgetMerchanList(1)\n\tclose()\n}\r\n\r\n//搜索功能\r\nconst searchWord=ref<string>(\"\")\r\nconst handleSearch=()=>{\n\tparams.merchantName=searchWord.value;\n\tparams.keyword=\"\"\n\tcurrentIndex.value=0;\n\tgetMerchanList(1)\n}\r\n\r\n//跳转到商家详情页面\r\nconst goDetail=(item)=>{\n\t\tuni.navigateTo({\n\t\t\turl:`/packageB/merchant-detail/merchant-detail?info=${JSON.stringify(item)}`\n\t\t})\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.merchant-page{\n\t\tmin-height: 100vh;\n\t\tbackground-color: #f5f5f5;\n\t\t.search-header{\n\t\t\tbackground-color: #fff;\n\t\t\tpadding: 30rpx;\n\t\t}\n\t\t.merchant{\n\t\t\twidth: 100%;\n\t\t\t.custom-dropdown{\n\t\t\t\tbackground-color: #fff;\n\t\t\t\t.dropdown-header{\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tborder-bottom: 1rpx solid #f0f0f0;\n\t\t\t\t}\n\t\t\t\t.dropdown-item{\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tpadding: 30rpx 20rpx;\n\t\t\t\t\t.dropdown-text{\n\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\tcolor: #333;\n\t\t\t\t\t\tmargin-right: 10rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.tabs{\n\t\t\tbackground-color: #fff;\n\t\t\tpadding: 30rpx;\n\t\t}\n\t}\n\t\n\t.service-card{\n\t\tdisplay: flex;\n\t\tbackground-color: #fff;\n\t\tborder-radius: 16rpx;\n\t\tmargin: 10rpx 0 10rpx 0;\n\t\tpadding: 20rpx;\n\t\t.service-img{\n\t\t\twidth: 160rpx;\n\t\t\theight: 160rpx;\n\t\t\tbackground-color: #ddd;\n\t\t\tborder-radius: 8rpx;\n\t\t\tmargin-right: 20rpx;\n\t\t\tmargin-top: 8rpx;\n\t\t}\n\t\t.service-info{\n\t\t\tflex: 1;\n\t\t\t.service-name{\n\t\t\t\tfont-size: 32rpx;\n\t\t\t\tfont-weight: bold;\n\t\t\t\tcolor: #000;\n\t\t\t\tline-height:44rpx;\n\t\t\t\tdisplay: block;\n\t\t\t\tmargin-bottom: 8rpx;\n\t\t\t}\n\t\t\t.rate-area{\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-bottom: 8rpx;\n\t\t\t\t.rate-text{\n\t\t\t\t\tcolor: $uni-color-primary;\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\tmargin-left: 10rpx;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t.service-detail{\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tcolor: #999;\n\t\t\t\tline-height: 34rpx;\n\t\t\t\tdisplay: block;\n\t\t\t\tmargin-bottom: 20rpx;\n\t\t\t}\n\t\t\t.tag-area{\n\t\t\t\tdisplay:flex;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin: 12rpx 0;\n\t\t\t\t.tag-item{\n\t\t\t\t\tfont-size: 18rpx;\n\t\t\t\t\tpadding: 4rpx 14rpx;\n\t\t\t\t\tborder-radius: 20rpx;\n\t\t\t\t\tmargin-right: 16rpx;\n\t\t\t\t\tborder:1px solid;\n\t\t\t\t\t&:nth-child(1){\n\t\t\t\t\t\tcolor: #ff6b81;\n\t\t\t\t\t\tborder-color: #ff6b81;\n\t\t\t\t\t\tbackground-color: rgba(255, 107, 129, 0.1);\n\t\t\t\t\t}\n\t\t\t\t\t&:nth-child(2){\n\t\t\t\t\t\tcolor: #ffce2c;\n\t\t\t\t\t\tborder-color: #ffce2c;\n\t\t\t\t\t\tbackground-color: rgba(255, 206, 44, 0.1);\n\t\t\t\t\t}\n\t\t\t\t\t&:nth-child(3){\n\t\t\t\t\t\tcolor: #19be6b;\n\t\t\t\t\t\tborder-color: #19be6b;\n\t\t\t\t\t\tbackground-color: rgba(25, 190, 107, 0.1);\n\t\t\t\t\t}\n\t\t\t\t\t&:nth-child(4){\n\t\t\t\t\t\tcolor: #ff9900;\n\t\t\t\t\t\tborder-color: #ff9900;\n\t\t\t\t\t\tbackground-color: rgba(255, 153, 0, 0.1);\n\t\t\t\t\t}\n\t\t\t\t\t&:last-child{\n\t\t\t\t\t\tmargin-right: 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t.price-area{\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-top: 16rpx;\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tcolor:#666;\n\t\t\t\tview{\n\t\t\t\t\tbackground-color: $uni-color-primary;\n\t\t\t\t\tcolor: #fff;\n\t\t\t\t\tfont-size: 20rpx;\n\t\t\t\t\tpadding: 2rpx 8rpx;\n\t\t\t\t\tborder-radius: 4rpx;\n\t\t\t\t\tmargin-right: 8rpx;\n\t\t\t\t}\n\t\t\t\ttext{\n\t\t\t\t\tcolor: #ff6b81;\n\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\tmargin: 0 4rpx;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n</style>\n","import MiniProgramPage from 'D:/uni-app项目/liuliuzhua/packageB/merchant/merchant.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","ref","onLoad","get","uni","onReachBottom"],"mappings":"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"}