{"version":3,"file":"order.js","sources":["packageB/order/order.vue","../../Hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFja2FnZUJcb3JkZXJcb3JkZXIudnVl"],"sourcesContent":["<template>\n\t<view class=\"order-create\">\n\t\t<!--收货地址-->\r\n\t\t<view class=\"address-section\" @click=\"chooseAddress\">\r\n\t\t\t<view class=\"address-content\" v-if=\"address?.name\">\r\n\t\t\t\t<view class=\"user-info\">\r\n\t\t\t\t\t<text class=\"name\">{{address.name}}</text>\r\n\t\t\t\t\t<text class=\"phone\">{{address.phone}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"address-detail\">{{address.province}}{{address.city}}{{address.district}}{{address.detail}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"no-address\" v-else>\r\n\t\t\t\t<text>请选择收货地址</text>\r\n\t\t\t</view>\r\n\t\t\t<up-icon name=\"arrow-right\" size=\"24\" color=\"#999\"></up-icon>\r\n\t\t</view>\r\n\r\n\t\t<!--商品列表-->\r\n\t\t<view class=\"goods-section\">\r\n\t\t\t<view class=\"section-title\">商品信息</view>\r\n\t\t\t<view class=\"goods-list\">\r\n\t\t\t\t<view class=\"goods-item\" v-for=\"item in selPro\" :key=\"item.product_id\">\r\n\t\t\t\t\t<image class=\"goods-img\" :src=\"item.main_pic\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t<view class=\"goods-info\">\r\n\t\t\t\t\t\t<view class=\"goods-name\">{{item.name}}</view>\r\n\t\t\t\t\t\t<view class=\"goods-spec\">{{item.spec}}</view>\r\n\t\t\t\t\t\t<view class=\"price-quantity\">\r\n\t\t\t\t\t\t\t<text class=\"price\">￥{{item.price}}</text>\r\n\t\t\t\t\t\t\t<text class=\"quantity\">×{{item.count}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!--配送方式-->\r\n\t\t<view class=\"delivery-section\">\r\n\t\t\t<view class=\"section-title\">配送方式</view>\r\n\t\t\t<view class=\"delivery-options\">\r\n\t\t\t\t<view class=\"delivery-item\">\r\n\t\t\t\t\t<text>快递配送</text>\r\n\t\t\t\t\t<text class=\"delivery-free\">免运费</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!--订单备注-->\r\n\t\t<view class=\"remark-section\">\r\n\t\t\t<view class=\"section-title\">订单备注</view>\r\n\t\t\t<input class=\"remark-input\" placeholder=\"请输入备注信息(选填)\" />\r\n\t\t</view>\r\n\t\t\r\n\t\t<!--金额明细-->\r\n\t\t<view class=\"amount-section\">\r\n\t\t\t<view class=\"amount-item\">\r\n\t\t\t\t<text>商品金额</text>\r\n\t\t\t\t<text>￥{{totalPrice}}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"amount-item\">\r\n\t\t\t\t<text>运费</text>\r\n\t\t\t\t<text>￥0.00</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"amount-item total\">\r\n\t\t\t\t<text>实付金额</text>\r\n\t\t\t\t<text class=\"price\">￥{{totalPrice}}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!--底部结算-->\r\n\t\t<view class=\"settlement-bar\">\r\n\t\t\t<view class=\"total-info\">\r\n\t\t\t\t<text>合计：</text>\r\n\t\t\t\t<text class=\"price\">￥{{totalPrice}}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"submit-btn\" @click=\"submitOrder\">立即支付</view>\r\n\t\t</view>\n\t</view>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, ref } from \"vue\"\nimport { get,post } from \"../../utils/http\"\nimport { onLoad } from \"@dcloudio/uni-app\"\r\n\r\ninterface AddressItem {\n\tcity : string;\n\tdetail : string;\n\tdistrict : string;\n\tid : number;\n\tis_default : 1 | 0;\n\tname : string;\n\tphone : string;\n\tprovince : string;\n\tuser_id : number\n}\r\n\t\r\nonLoad((options) => {\n\tgetAddress()\r\n\tselPro.value = JSON.parse(options.selPro)\r\n\tuni.$on(\"addressSelected\", (selectedAddress) => {\r\n\t\tuni.__f__('log','at packageB/order/order.vue:102',\"选中的地址是\", selectedAddress)\r\n\t\taddress.value = selectedAddress //更新页面中显示的地址信息\r\n\t})\n})\r\n\n//地址管理\nconst address = ref<AddressItem>({} as AddressItem)\nconst getAddress = async () => {\n\ttry {\n\t\tconst result : any = await get(\"/cart/address\");\n\t\taddress.value = result.filter(item => item.is_default)[0]\r\n\t\tuni.__f__('log','at packageB/order/order.vue:113',address.value,233)\n\t} catch (error) {\n\t\tuni.__f__('log','at packageB/order/order.vue:115',error)\n\t}\n}\r\n//选择地址\r\nconst chooseAddress = () => {\n\tuni.navigateTo({\n\t\turl: \"/packageB/address/address?flag=1\"\n\t})\n}\r\n\r\n//商品信息\nconst selPro = ref([])\r\n\r\n//计算总价\nconst totalPrice = computed<number>(() => {\n\tlet total = 0;\n\tselPro.value.forEach(item => {\n\t\ttotal += Number(item.price)\n\t})\n\treturn total\n})\n</script>\n\n<style lang=\"scss\" scoped>\n\t.order-create {\n\t\tmin-height: 100vh;\n\t\tbackground-color: #f5f5f5;\n\t\tpadding-bottom: 120rpx;\n\n\t\t.address-section {\n\t\t\tbackground-color: #fff;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tpadding: 30rpx;\n\t\t\tmargin-bottom: 20rpx;\n\n\t\t\t.address-content {\n\t\t\t\tflex: 1;\n\n\t\t\t\t.user-info {\n\t\t\t\t\tmargin-bottom: 10rpx;\n\n\t\t\t\t\t.name {\n\t\t\t\t\t\tfont-size: 32rpx;\n\t\t\t\t\t\tcolor: #333;\n\t\t\t\t\t\tmargin-right: 20rpx;\n\t\t\t\t\t}\n\n\t\t\t\t\t.phone {\n\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.address-detail {\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\tcolor: #666;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t.no-address {\n\t\t\t\tflex: 1;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: #999;\n\t\t\t}\n\t\t}\n\n\t\t.goods-section {\n\t\t\tbackground-color: #fff;\n\t\t\tpadding: 30rpx;\n\t\t\tmargin-bottom: 20rpx;\n\n\t\t\t.section-title {\n\t\t\t\tfont-size: 30rpx;\n\t\t\t\tcolor: #333;\n\t\t\t\tmargin-bottom: 20rpx;\n\t\t\t}\n\n\t\t\t.goods-list {\n\t\t\t\t.goods-item {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tmargin-bottom: 30rpx;\n\n\t\t\t\t\t.goods-img {\n\t\t\t\t\t\twidth: 160rpx;\n\t\t\t\t\t\theight: 160rpx;\n\t\t\t\t\t\tborder-radius: 12rpx;\n\t\t\t\t\t\tmargin-right: 20rpx;\n\t\t\t\t\t}\n\n\t\t\t\t\t.goods-info {\n\t\t\t\t\t\tflex: 1;\n\n\t\t\t\t\t\t.goods-name {\n\t\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\t\tcolor: #333;\n\t\t\t\t\t\t\tmargin-bottom: 10rpx;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.goods-spec {\n\t\t\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t\t\tcolor: #999;\n\t\t\t\t\t\t\tmargin-bottom: 20rpx;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.price-quantity {\n\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\t\talign-items: center;\n\n\t\t\t\t\t\t\t.price {\n\t\t\t\t\t\t\t\tcolor: #ff4d4f;\n\t\t\t\t\t\t\t\tfont-size: 32rpx;\n\t\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t.quantity {\n\t\t\t\t\t\t\t\tfont-size: 26rpx;\n\t\t\t\t\t\t\t\tcolor: #999;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.delivery-section {\n\t\t\tbackground-color: #fff;\n\t\t\tpadding: 30rpx;\n\t\t\tmargin-bottom: 20rpx;\n\n\t\t\t.section-title {\n\t\t\t\tfont-size: 30rpx;\n\t\t\t\tcolor: #333;\n\t\t\t\tmargin-bottom: 20rpx;\n\n\t\t\t}\n\n\t\t\t.delivery-options {\n\t\t\t\t.delivery-item {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tpadding: 20rpx 0;\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\tcolor: #333;\n\n\t\t\t\t\t.delivery-free {\n\t\t\t\t\t\tcolor: #999;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.remark-section {\n\t\t\tbackground-color: #fff;\n\t\t\tpadding: 30rpx;\n\t\t\tmargin-bottom: 20rpx;\n\n\t\t\t.section-title {\n\t\t\t\tfont-size: 30rpx;\n\t\t\t\tcolor: #333;\n\t\t\t\tmargin-bottom: 20rpx;\n\n\t\t\t}\n\n\t\t\t.remark-input {\n\t\t\t\theight: 80rpx;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: #333;\n\t\t\t}\n\t\t}\n\n\t\t.amount-section {\n\t\t\tbackground-color: #fff;\n\t\t\tpadding: 30rpx;\n\t\t\tmargin-bottom: 20rpx;\n\n\t\t\t.amount-item {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-bottom: 20rpx;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: #666;\n\n\t\t\t\t&.total {\n\t\t\t\t\tborder-top: 2rpx solid #f5f5f5;\n\t\t\t\t\tmargin-top: 20rpx;\n\t\t\t\t\tpadding-top: 20rpx;\n\t\t\t\t\tcolor: #333;\n\t\t\t\t\tfont-size: 30rpx;\n\n\t\t\t\t\t.price {\n\t\t\t\t\t\tcolor: #ff4d4f;\n\t\t\t\t\t\tfont-size: 36rpx;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.settlement-bar {\n\t\t\tposition: fixed;\n\t\t\tbottom: 0;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\theight: 100rpx;\n\t\t\tpadding: 20rpx;\n\t\t\tbackground-color: #fff;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.1);\n\n\t\t\t.total-info {\n\t\t\t\tflex: 1;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: #333;\n\n\t\t\t\t.price {\n\t\t\t\t\tcolor: #ff4d4f;\n\t\t\t\t\tfont-size: 36rpx;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.submit-btn {\n\t\t\t\twidth: 240rpx;\n\t\t\t\theight: 80rpx;\n\t\t\t\tbackground-color: #ffce2c;\n\t\t\t\tcolor: #fff;\n\t\t\t\tborder-radius: 40rpx;\n\t\t\t\ttext-align: center;\n\t\t\t\tline-height: 80rpx;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t}\n\t\t}\n\t}\n</style>\n","import MiniProgramPage from 'D:/uni-app项目/liuliuzhua/packageB/order/order.vue'\nwx.createPage(MiniProgramPage)"],"names":["onLoad","uni","ref","get","computed"],"mappings":";;;;;;;;;;;;;;AAiGAA,kBAAA,OAAO,CAAC,YAAY;AACR;AACX,aAAO,QAAQ,KAAK,MAAM,QAAQ,MAAM;AACpCC,oBAAAA,MAAA,IAAI,mBAAmB,CAAC,oBAAoB;AAC/CA,sBAAA,MAAI,MAAM,OAAM,mCAAkC,UAAU,eAAe;AAC3E,gBAAQ,QAAQ;AAAA,MAAA,CAChB;AAAA,IAAA,CACD;AAGK,UAAA,UAAUC,kBAAiB,CAAA,CAAiB;AAClD,UAAM,aAAa,YAAY;AAC1B,UAAA;AACG,cAAA,SAAe,MAAMC,qBAAI,eAAe;AAC9C,gBAAQ,QAAQ,OAAO,OAAO,UAAQ,KAAK,UAAU,EAAE,CAAC;AACxDF,sBAAA,MAAI,MAAM,OAAM,mCAAkC,QAAQ,OAAM,GAAG;AAAA,eAC3D,OAAO;AACXA,sBAAAA,MAAA,MAAM,OAAM,mCAAkC,KAAK;AAAA,MACxD;AAAA,IAAA;AAGD,UAAM,gBAAgB,MAAM;AAC3BA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MAAA,CACL;AAAA,IAAA;AAII,UAAA,SAASC,kBAAI,CAAA,CAAE;AAGf,UAAA,aAAaE,cAAAA,SAAiB,MAAM;AACzC,UAAI,QAAQ;AACL,aAAA,MAAM,QAAQ,CAAQ,SAAA;AACnB,iBAAA,OAAO,KAAK,KAAK;AAAA,MAAA,CAC1B;AACM,aAAA;AAAA,IAAA,CACP;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrID,GAAG,WAAW,eAAe;"}