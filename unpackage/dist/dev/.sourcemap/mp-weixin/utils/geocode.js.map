{"version":3,"file":"geocode.js","sources":["utils/geocode.ts"],"sourcesContent":["interface AMapResponse{\r\n\tstatus:string;\r\n\tinfo:string;\r\n\tregeocode:{\t\t\r\n\t\tformatted_address:string;\r\n\t\taddressComponent:{\r\n\t\t\tprovince:string;\r\n\t\t\tcity:string;\r\n\t\t\tdistrict:string;\r\n\t\t\ttownship:string\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nexport const reverseCode=(longitude:number,latitude:number):Promise<string>=>{\r\n\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\tif(typeof longitude !==\"number\" || typeof latitude !==\"number\"){\r\n\t\t\t\treject(\"经纬度必须为数字\")\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tuni.request({\r\n\t\t\t\turl:\"https://restapi.amap.com/v3/geocode/regeo\",\r\n\t\t\t\tdata:{\r\n\t\t\t\t\tkey:\"5bae6b196907f97857fdc699d03e23a9\",\r\n\t\t\t\t\tlocation:`${longitude},${latitude}`,\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tconsole.log(\"高德api接口返回\",res)\r\n\t\t\t\t\tconst data:AMapResponse=res.data as AMapResponse\r\n\t\t\t\t\tif(data.status!==\"1\"){\r\n\t\t\t\t\t\treject(\"高德api错误\")\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst address:string=data.regeocode.addressComponent.city.length? data.regeocode.addressComponent.city:data.regeocode.addressComponent.province\r\n\t\t\t\t\tconsole.log(\"地址\",address);        \r\n                    resolve(address)\r\n\t\t\t\t},\r\n\t\t\t\tfail(err) {\r\n\t\t\t\t\treject(`请求失败:${err.errMsg}`)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t\r\n\t\t})\r\n}"],"names":["uni"],"mappings":";;AAea,MAAA,cAAY,CAAC,WAAiB,aAAkC;AAC3E,SAAO,IAAI,QAAQ,CAAC,SAAQ,WAAS;AACpC,QAAG,OAAO,cAAa,YAAY,OAAO,aAAY,UAAS;AAC9D,aAAO,UAAU;AACjB;AAAA,IACD;AACAA,kBAAAA,MAAI,QAAQ;AAAA,MACX,KAAI;AAAA,MACJ,MAAK;AAAA,QACJ,KAAI;AAAA,QACJ,UAAS,GAAG,SAAS,IAAI,QAAQ;AAAA,MAClC;AAAA,MACA,QAAQ,KAAK;AACZA,sBAAA,6CAAY,aAAY,GAAG;AAC3B,cAAM,OAAkB,IAAI;AACzB,YAAA,KAAK,WAAS,KAAI;AACpB,iBAAO,SAAS;AAChB;AAAA,QACD;AACA,cAAM,UAAe,KAAK,UAAU,iBAAiB,KAAK,SAAQ,KAAK,UAAU,iBAAiB,OAAK,KAAK,UAAU,iBAAiB;AACvIA,sBAAA,MAAA,MAAA,OAAA,0BAAY,MAAK,OAAO;AACT,gBAAQ,OAAO;AAAA,MAC/B;AAAA,MACA,KAAK,KAAK;AACF,eAAA,QAAQ,IAAI,MAAM,EAAE;AAAA,MAC5B;AAAA,IAAA,CACA;AAAA,EAAA,CAED;AACH;;"}