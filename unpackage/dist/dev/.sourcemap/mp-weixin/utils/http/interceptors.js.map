{"version":3,"file":"interceptors.js","sources":["utils/http/interceptors.ts"],"sourcesContent":["import {RequestConfig} from \"./types\";\r\n\r\nconst getToken = () => uni.getStorageSync(\"token\") || \"\"\r\n\r\n//请求拦截器\r\nexport const requestInterceptor = (config:RequestConfig) => { \r\n   const token = getToken()\r\n   if (token) {\r\n        config.header = {\r\n            ...config.header,\r\n            Authorization: `Bearer ${token}`\r\n       }\r\n   }\r\n   return config\r\n}\r\n\r\n//响应拦截器\r\nexport const responseInterceptor = (res:any) => {\r\n    if(res.statusCode !== 200) {throw new Error(\"请求失败\",res.data.message)}\r\n    if(!res.data.success) {throw new Error(\"数据异常\")}\r\n    return res.data.data\r\n}"],"names":["uni"],"mappings":";;AAEA,MAAM,WAAW,MAAMA,cAAI,MAAA,eAAe,OAAO,KAAK;AAGzC,MAAA,qBAAqB,CAAC,WAAyB;AACzD,QAAM,QAAQ;AACd,MAAI,OAAO;AACN,WAAO,SAAS;AAAA,MACZ,GAAG,OAAO;AAAA,MACV,eAAe,UAAU,KAAK;AAAA,IAAA;AAAA,EAEvC;AACO,SAAA;AACV;AAGa,MAAA,sBAAsB,CAAC,QAAY;AACzC,MAAA,IAAI,eAAe,KAAK;AAAC,UAAM,IAAI,MAAM,QAAO,IAAI,KAAK,OAAO;AAAA,EAAC;AACjE,MAAA,CAAC,IAAI,KAAK,SAAS;AAAO,UAAA,IAAI,MAAM,MAAM;AAAA,EAAC;AAC9C,SAAO,IAAI,KAAK;AACpB;;;"}