{"version":3,"file":"interceptors.js","sources":["utils/http/interceptors.ts"],"sourcesContent":["import {RequestConfig} from \"./types\";\r\n\r\nconst getToken = () => uni.getStorageSync(\"token\") || \"\"\r\n\r\n//请求拦截器\r\nexport const requestInterceptor = (config:RequestConfig) => { \r\n   const token = getToken()\r\n   if (token) {\r\n        config.header = {\r\n            ...config.header,\r\n            Authorization: `Bearer ${token}`\r\n       }\r\n   }\r\n   return config\r\n}\r\n\r\n//响应拦截器\r\nexport const responseInterceptor = (res:any) => {\r\n    if(res.statusCode !== 200){\r\n\t\tuni.showToast({\r\n\t\t\ttitle:res.data.message,\r\n\t\t\ticon:\"none\"\r\n\t\t})\r\n\t\treturn\r\n\t}\r\n    if(!res.data.success){\r\n\t\tuni.showToast({\r\n\t\t\ttitle:res.data.message,\r\n\t\t\ticon:\"none\"\r\n\t\t})\r\n\t\treturn\r\n\t}\r\n    return res.data.data\r\n}"],"names":["uni"],"mappings":";;AAEA,MAAM,WAAW,MAAMA,cAAI,MAAA,eAAe,OAAO,KAAK;AAGzC,MAAA,qBAAqB,CAAC,WAAyB;AACzD,QAAM,QAAQ;AACd,MAAI,OAAO;AACN,WAAO,SAAS;AAAA,MACZ,GAAG,OAAO;AAAA,MACV,eAAe,UAAU,KAAK;AAAA,IAAA;AAAA,EAEvC;AACO,SAAA;AACV;AAGa,MAAA,sBAAsB,CAAC,QAAY;AACzC,MAAA,IAAI,eAAe,KAAI;AAC5BA,kBAAAA,MAAI,UAAU;AAAA,MACb,OAAM,IAAI,KAAK;AAAA,MACf,MAAK;AAAA,IAAA,CACL;AACD;AAAA,EACD;AACM,MAAA,CAAC,IAAI,KAAK,SAAQ;AACvBA,kBAAAA,MAAI,UAAU;AAAA,MACb,OAAM,IAAI,KAAK;AAAA,MACf,MAAK;AAAA,IAAA,CACL;AACD;AAAA,EACD;AACG,SAAO,IAAI,KAAK;AACpB;;;"}