{"version":3,"file":"selected.js","sources":["pages/selected/selected.vue","../../Hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2VsZWN0ZWQvc2VsZWN0ZWQudnVl"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<view class=\"header\">\r\n\t\t\t<view class=\"nav-content\">\r\n\t\t\t\t<uni-search-bar\r\n\t\t\t\t radius=\"100\" \r\n\t\t\t\t placeholder=\"猫粮狗粮、宠物零食\" \r\n\t\t\t\t clearButton=\"none\" \r\n\t\t\t\t cancelButton=\"none\"\r\n\t\t\t\t style=\"width: 100%\"\r\n\t\t\t\t>\r\n\t\t\t\t</uni-search-bar>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"content\">\r\n\t\t\t<view class=\"category-section\">\r\n\t\t\t\t<!-- 左侧分类 -->\r\n\t\t\t\t<scroll-view class=\"category-left\" scroll-y>\r\n\t\t\t\t  <view \r\n\t\t\t\t  v-for=\"(item,index) in categories\" \r\n\t\t\t\t  :key=\"item.id\" \r\n\t\t\t\t  class=\"category-item\"\r\n\t\t\t\t  :class=\"{active:currentCategory === index}\"\r\n\t\t\t\t  @click=\"switchCategory(index)\"\r\n\t\t\t\t  >\r\n\t\t\t\t  {{item.category_name}}\r\n\t\t\t\t  </view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\t\t</view>\n\t</view>\n</template>\n\n<script setup lang=\"ts\">\r\nimport {onLoad,onReachBottom} from \"@dcloudio/uni-app\"\r\nimport {ref,computed} from \"vue\"\r\nimport {get} from \"@/utils/http\"\r\n\r\nonLoad(() =>{\r\n\tgetCategories()\r\n})\r\n\r\n//获取左侧菜单分类\r\nconst categories:any = ref([])\r\nconst currentPage= ref(1)\r\nconst getCategories = async () =>{\r\n\tconst data:any = await get(\"/sel/tag\")\r\n\tcategories.value = data.tag\r\n\tgetProducts(currentPage.value,categories.value[0].id)\r\n\t//uni.__f__('log','at pages/selected/selected.vue:50',categories.value,123)\r\n}\r\n\r\n//设置高亮效果\r\nconst currentCategory = ref(0)\r\nconst switchCategory = (index:number) =>{\r\n\tcurrentCategory.value = index\r\n}\r\n\r\n//获取右侧商品菜单\r\nconst products = ref([])\r\nconst totalPages = ref(0)\r\nconst getProducts = async (page:number,category_id:number) =>{\r\n\tconst data:any = await get(\"/sel/products\",{page,category_id})\r\n\tuni.__f__('log','at pages/selected/selected.vue:64',\"商品数据\",data)\r\n\tif(page === 1){\r\n\t\tproducts.value = data.list\r\n\t}else{\r\n\t\tproducts.value = [...products.value,...data.list]\r\n\t}\r\n\ttotalPages.value = data.pagination.totalPages\r\n\tcurrentPage.value = data.pagination.current\r\n}\r\n\r\nonReachBottom(() => {\r\n\tif(currentPage.value < totalPages.value){\r\n\t\t//getProducts(currentPage.value+1,category_id)\r\n\t}\r\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.container{\r\n\tbackground-color: #f7f7f7;\r\n\t.header{\r\n\t\tbackground-color: $uni-color-primary;\r\n\t\twidth: 100%;\r\n\t\t.nav-content{\r\n\t\t\theight: 88rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 20rpx 50rpx;\r\n\t\t}\r\n\t}\r\n\t.content{\r\n\t\t.category-section{\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-radius: 16rpx;\r\n\t\t\theight: calc(100vh - 150rpx);\r\n\t\t\t.category-left{\r\n\t\t\t\twidth: 180rpx;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tbackground-color: #f7f7f7;\r\n\t\t\t\t.category-item{\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t\theight: 100rpx;\r\n\t\t\t\t\tline-height: 100rpx;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tcolor: $uni-text-color;\r\n\t\t\t\t\tborder-bottom: 1px solid #eee;\r\n\t\t\t\t\t&.active{\r\n\t\t\t\t\t\tbackground-color: #fff;\r\n\t\t\t\t\t\tcolor:$uni-color-primary;\r\n\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t\t&::before{\r\n\t\t\t\t\t\t\tcontent: \"\";\r\n\t\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\t\twidth: 6rpx;\r\n\t\t\t\t\t\t\theight: 30rpx;\r\n\t\t\t\t\t\t\tleft: 0;\r\n\t\t\t\t\t\t\ttop: 50%;\r\n\t\t\t\t\t\t\ttransform: translateY(-50%);\r\n\t\t\t\t\t\t\tbackground-color: $uni-color-primary;\r\n\t\t\t\t\t\t\tborder-radius: 0 4rpx 4rpx 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\n</style>\n","import MiniProgramPage from 'D:/uni-app项目/liuliuzhua/pages/selected/selected.vue'\nwx.createPage(MiniProgramPage)"],"names":["onLoad","ref","get","uni","onReachBottom"],"mappings":";;;;;;;;;;;;;;AAsCAA,kBAAAA,OAAO,MAAK;AACG;IAAA,CACd;AAGK,UAAA,aAAiBC,kBAAI,CAAA,CAAE;AACvB,UAAA,cAAaA,kBAAI,CAAC;AACxB,UAAM,gBAAgB,YAAW;AAC1B,YAAA,OAAW,MAAMC,qBAAI,UAAU;AACrC,iBAAW,QAAQ,KAAK;AACxB,kBAAY,YAAY,OAAM,WAAW,MAAM,CAAC,EAAE,EAAE;AAAA,IAAA;AAK/C,UAAA,kBAAkBD,kBAAI,CAAC;AACvB,UAAA,iBAAiB,CAAC,UAAgB;AACvC,sBAAgB,QAAQ;AAAA,IAAA;AAInB,UAAA,WAAWA,kBAAI,CAAA,CAAE;AACjB,UAAA,aAAaA,kBAAI,CAAC;AAClB,UAAA,cAAc,OAAO,MAAY,gBAAsB;AAC5D,YAAM,OAAW,MAAMC,qBAAI,iBAAgB,EAAC,MAAK,aAAY;AAC7DC,oBAAA,MAAI,MAAM,OAAM,qCAAoC,QAAO,IAAI;AAC/D,UAAG,SAAS,GAAE;AACb,iBAAS,QAAQ,KAAK;AAAA,MAAA,OAClB;AACJ,iBAAS,QAAQ,CAAC,GAAG,SAAS,OAAM,GAAG,KAAK,IAAI;AAAA,MACjD;AACW,iBAAA,QAAQ,KAAK,WAAW;AACvB,kBAAA,QAAQ,KAAK,WAAW;AAAA,IAAA;AAGrCC,kBAAAA,cAAc,MAAM;AAChB,UAAA,YAAY,QAAQ,WAAW;AAAM;AAAA,IAExC,CACA;;;;;;;;;;;;;;;;;;;;;;;AC5ED,GAAG,WAAW,eAAe;"}