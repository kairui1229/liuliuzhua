{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../Hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"header\" :style=\"headerStyle\">\r\n\t\t\t<view class=\"status-bar\"></view>\r\n\t\t\t<view class=\"nav-content\" :style=\"navStyle\">\r\n\t\t\t\t<view class=\"location\" @click=\"startLocation\">\r\n\t\t\t\t\t<uni-icons type=\"location\" size=\"28\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t\t<text class=\"city\">{{ cityName }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"search-box\">\r\n\t\t\t\t\t<uni-search-bar \r\n\t\t\t\t\t radius=\"100\" \r\n\t\t\t\t\t placeholder=\"搜索宠物服务\" \r\n\t\t\t\t\t clearButton=\"none\" \r\n\t\t\t\t\t cancelButton=\"none\"\r\n\t\t\t\t\t style=\"width: 100%\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t</uni-search-bar>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport {onLoad} from \"@dcloudio/uni-app\"\r\nimport {ref,computed} from \"vue\"\r\nimport {reverseCode} from \"@/utils/geocode\"\r\n\r\nconst menuButtonInfo  = ref(null)\r\n\r\nonLoad(() =>{\r\n\r\n\tmenuButtonInfo.value = uni.getMenuButtonBoundingClientRect()\t\r\n\r\n\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tstartLocation()\r\n})\r\n\r\n//自适应高度\r\nconst headerStyle = computed(() => {\r\n\tlet style = {\r\n\t\theight:\"200px\"\r\n\t}\r\n\r\n\tif(menuButtonInfo.value){\r\n\t\tstyle={\r\n\t\t\theight:`${menuButtonInfo.value.top+menuButtonInfo.value.height+20}px`,\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\treturn style\r\n})\r\nconst navStyle = computed(() => {\r\n\tlet style = {\r\n\t\ttop:\"0px\",\r\n\t\theight:\"44px\"\r\n\t}\r\n\r\n\tif(menuButtonInfo.value){\r\n\t\tstyle={\r\n\t\t\ttop:`${menuButtonInfo.value.top}px`,\r\n\t\t\theight:`${menuButtonInfo.value.height}px`,\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\treturn style\r\n})\r\n\r\n//地理信息定位\r\nconst cityName = ref('')\r\nconst startLocation = () =>{\r\n\tuni.getLocation({\r\n\t\ttype:\"wgs84\",\r\n\t\tgeocode:true,\r\n\t\tsuccess: (res) => {\r\n\t\t\tuni.__f__('log','at pages/index/index.vue:97',\"经度\", res.longitude);\r\n\t\t\tuni.__f__('log','at pages/index/index.vue:98',\"纬度\", res.latitude);\r\n\t\t\treverseCode(res.longitude,res.latitude).then((res) => {\r\n\t\t\t\tcityName.value = res\r\n            }).catch((err) => {\r\n\t\t\t\tcityName.value = \"无法定位\"\r\n            })\r\n\t\t},\r\n\t\tfail: (err) => {\r\n\t\t\tcityName.value = \"无法获取位置\"\r\n\t\t\tuni.showModal({\r\n\t\t\t    title:\"提示\",\r\n\t\t\t\tcontent:\"需要获取您的位置信息，是否去设置开启定位权限？\",\r\n                success:(res)=>{\r\n\t\t\t\t\tif(res.confirm){\r\n\r\n\r\n\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\tsuccess:(res)=>{\r\n\t\t\t\t\t\t\t\tif(res.authSetting[\"scope.userLocation\"]){\r\n\t\t\t\t\t\t\t\t\tstartLocation()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t    })\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t   }\r\n\t\t\t    }\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container{\r\n\tbackground-color: #f7f7f7;\r\n\t.header{\r\n\t\tbackground-color: $uni-color-primary;\r\n\t\t.status-bar{\r\n\t\t\twidth:100%;\r\n\t\t\theight: var(--status-bar-height);\r\n\t\t}\r\n\t\t.nav-content{\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 0 30rpx;\r\n\t\t\tposition: fixed;\r\n\t\t\tleft:0;\r\n\t\t\tright:0;\r\n\t\t\t.location{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-right: 10rpx;\r\n\t\t\t\t.city{\r\n\t\t\t\t\tcolor:#fff;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\twidth:120rpx;\r\n\t\t\t\t\twhite-space: normal;\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.search-box{\r\n\t\t\t\twidth:360rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/uni-app项目/liuliuzhua/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","computed","reverseCode","res"],"mappings":";;;;;;;;;;;;;;;;AA6BM,UAAA,iBAAkBA,kBAAI,IAAI;AAEhCC,kBAAAA,OAAO,MAAK;AAEI,qBAAA,QAAQC,oBAAI;AAUb;IAAA,CACd;AAGK,UAAA,cAAcC,cAAAA,SAAS,MAAM;AAClC,UAAI,QAAQ;AAAA,QACX,QAAO;AAAA,MAAA;AAGR,UAAG,eAAe,OAAM;AACjB,gBAAA;AAAA,UACL,QAAO,GAAG,eAAe,MAAM,MAAI,eAAe,MAAM,SAAO,EAAE;AAAA,QAAA;AAAA,MAEnE;AAQO,aAAA;AAAA,IAAA,CACP;AACK,UAAA,WAAWA,cAAAA,SAAS,MAAM;AAC/B,UAAI,QAAQ;AAAA,QACX,KAAI;AAAA,QACJ,QAAO;AAAA,MAAA;AAGR,UAAG,eAAe,OAAM;AACjB,gBAAA;AAAA,UACL,KAAI,GAAG,eAAe,MAAM,GAAG;AAAA,UAC/B,QAAO,GAAG,eAAe,MAAM,MAAM;AAAA,QAAA;AAAA,MAEvC;AASO,aAAA;AAAA,IAAA,CACP;AAGK,UAAA,WAAWH,kBAAI,EAAE;AACvB,UAAM,gBAAgB,MAAK;AAC1BE,oBAAAA,MAAI,YAAY;AAAA,QACf,MAAK;AAAA,QACL,SAAQ;AAAA,QACR,SAAS,CAAC,QAAQ;AACjBA,wBAAA,MAAI,MAAM,OAAM,+BAA8B,MAAM,IAAI,SAAS;AACjEA,wBAAA,MAAI,MAAM,OAAM,+BAA8B,MAAM,IAAI,QAAQ;AAChEE,wBAAA,YAAY,IAAI,WAAU,IAAI,QAAQ,EAAE,KAAK,CAACC,SAAQ;AACrD,qBAAS,QAAQA;AAAAA,UAAA,CACR,EAAE,MAAM,CAAC,QAAQ;AAC1B,qBAAS,QAAQ;AAAA,UAAA,CACR;AAAA,QACX;AAAA,QACA,MAAM,CAAC,QAAQ;AACd,mBAAS,QAAQ;AACjBH,wBAAAA,MAAI,UAAU;AAAA,YACV,OAAM;AAAA,YACT,SAAQ;AAAA,YACI,SAAQ,CAAC,QAAM;AAC1B,kBAAG,IAAI,SAAQ;AAGdA,8BAAAA,MAAI,YAAY;AAAA,kBACf,SAAQ,CAACG,SAAM;AACXA,wBAAAA,KAAI,YAAY,oBAAoB,GAAE;AAC1B;oBACf;AAAA,kBACD;AAAA,gBAAA,CACG;AAAA,cAoBH;AAAA,YACA;AAAA,UAAA,CACH;AAAA,QACF;AAAA,MAAA,CACA;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;AC9IF,GAAG,WAAW,eAAe;"}